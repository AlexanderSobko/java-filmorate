DROP ALL OBJECTS DELETE FILES;
CREATE TABLE IF NOT EXISTS mpas (
    mpa_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);
CREATE TABLE IF NOT EXISTS films (
    film_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100),
    description VARCHAR(200),
    release_date DATE,
    mpa_id INT REFERENCES mpas,
    duration INT
);
CREATE TABLE IF NOT EXISTS users (
    user_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email VARCHAR(100) NOT NULL,
    login VARCHAR(100) NOT NULL,
    name VARCHAR(100),
    birthday DATE
);
CREATE TABLE IF NOT EXISTS friends (
    user_id INT NOT NULL REFERENCES users,
    friend_id INT NOT NULL REFERENCES users,
    PRIMARY KEY (user_id, friend_id)
);
CREATE TABLE IF NOT EXISTS film_likes (
    user_id INT NOT NULL REFERENCES users,
    film_id INT NOT NULL REFERENCES films,
    PRIMARY KEY (user_id, film_id)
);
CREATE TABLE IF NOT EXISTS genres (
    genre_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);
CREATE TABLE IF NOT EXISTS film_genres (
    genre_id INT NOT NULL REFERENCES genres,
    film_id INT NOT NULL REFERENCES films,
    PRIMARY KEY (genre_id, film_id)
);



